DROP DATABASE IF EXISTS bbs;

CREATE DATABASE bbs;

CREATE TABLE bbs.posts (
    id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
    user_id INT DEFAULT NULL,
    username VARCHAR(16) DEFAULT NULL,
    title VARCHAR(32) NOT NULL,
    message TEXT NOT NULL,
    password VARCHAR(255) DEFAULT NULL,
    image VARCHAR(255) DEFAULT NULL,
    is_deleted TINYINT(1) DEFAULT 0,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE = InnoDB;

CREATE TABLE bbs.users (
    id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(16) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL NULL,
    is_deleted TINYINT(1) DEFAULT 0,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE = InnoDB;

CREATE TABLE bbs.pre_users (
    id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
    token VARCHAR(255) NOT NULL,
    name VARCHAR(16) NOT NULL,
    email VARCHAR(255) NOT NULL,
    password VARCHAR(255) NOT NULL,
    expires_date TIMESTAMP NOT NULL,
    flag TINYINT(1) DEFAULT 0,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE = InnoDB;

CREATE TABLE bbs.admin (
    id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
    login_id VARCHAR(255) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    is_deleted TINYINT(1) DEFAULT 0,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE = InnoDB;

-- password = aabbccdd1239
INSERT INTO bbs.admin (login_id, password) VALUES ('root', '$2y$10$ak9TYXIX09U9cXGPTSgZYOPMAo9qNpl2VQWlV0XLD8ERzl9f/taSq');
